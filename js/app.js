document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".accordion-header");e.length&&e.forEach((e=>{e.addEventListener("click",(()=>{const t=e.closest(".accordion-item");t&&(document.querySelectorAll(".accordion-item.active").forEach((e=>{e!==t&&e.classList.remove("active")})),t.classList.toggle("active"))}))}));const t=document.querySelector(".header__menu"),n=document.getElementById("mobileNav"),o=document.getElementById("navOverlay"),l=document.getElementById("navCloseBtn"),d=()=>{n&&o&&(n.classList.remove("is-open"),o.classList.remove("is-open"),document.body.classList.remove("nav-open"),n.setAttribute("aria-hidden","true"),o.setAttribute("aria-hidden","true"))};t&&n&&o&&l&&(t.addEventListener("click",(()=>{n&&o&&(n.classList.add("is-open"),o.classList.add("is-open"),document.body.classList.add("nav-open"),n.setAttribute("aria-hidden","false"),o.setAttribute("aria-hidden","false"))})),l.addEventListener("click",d),o.addEventListener("click",d),document.addEventListener("keydown",(e=>{"Escape"===e.key&&d()})),n.querySelectorAll('a[href^="#"]').forEach((e=>{e.addEventListener("click",(t=>{const n=e.getAttribute("href"),o=n?document.querySelector(n):null;o&&(t.preventDefault(),d(),o.scrollIntoView({behavior:"smooth",block:"start"}))}))})));const a=document.querySelectorAll(".registerBtn"),r=document.getElementById("registrationModal"),s=document.getElementById("closeModalBtn"),i=document.querySelector(".homeModalOverlay"),c=document.getElementById("registrationForm"),m=document.getElementById("name"),u=document.getElementById("nameError"),y=document.getElementById("phone"),v=document.getElementById("phoneError"),E=document.getElementById("submitBtn"),g=window.phoneFormatter;let h=!1,p=0;const L=()=>{r&&(d(),h=!0,p=window.scrollY||0,r.style.display="block",document.body.style.overflow="hidden",u&&(u.style.display="none"),v&&(v.style.display="none"))},b=()=>{r&&h&&(h=!1,r.style.display="none",document.body.style.overflow="",window.scrollTo(0,p))};a.forEach((e=>e.addEventListener("click",L))),s?.addEventListener("click",b),i?.addEventListener("click",b),c?.addEventListener("submit",(e=>{if(e.preventDefault(),!g)return console.error("phoneFormatter is not initialized. Check load order."),void(v&&(v.style.display="block"));const t=m?.value?.trim()||"",n=y?.value?.trim()||"";let o=!1;if(t?u&&(u.style.display="none"):(u&&(u.style.display="block"),o=!0),g.validate(n)?v&&(v.style.display="none"):(v&&(v.style.display="block"),o=!0),o)return;E&&(E.textContent="YUBORILMOQDA...",E.disabled=!0);const l=new Date,d=l.toLocaleDateString("uz-UZ"),a=l.toLocaleTimeString("uz-UZ"),r={Ism:t,TelefonRaqam:`${g.getCurrentCode()} ${n}`,SanaSoat:`${d} - ${a}`};localStorage.setItem("formData",JSON.stringify(r)),m&&(m.value=""),y&&(y.value=""),b(),window.location.href="/thankYou.html",E&&(E.textContent="DAVOM ETISH",E.disabled=!1)}));const f=document.getElementById("timer");if(f){let e=120;const t=()=>{const t=Math.floor(e/60),o=e%60;f.textContent=`${String(t).padStart(2,"0")}:${String(o).padStart(2,"0")}`,e<=0?clearInterval(n):e-=1};t();const n=setInterval(t,1e3)}}));