document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".accordion-header");e.length&&e.forEach((e=>{e.addEventListener("click",(()=>{const t=e.closest(".accordion-item");t&&(document.querySelectorAll(".accordion-item.active").forEach((e=>{e!==t&&e.classList.remove("active")})),t.classList.toggle("active"))}))}));const t=document.querySelector(".header__menu"),n=document.getElementById("mobileNav"),o=document.getElementById("navOverlay"),d=document.getElementById("navCloseBtn"),l=()=>{n&&o&&(n.classList.remove("is-open"),o.classList.remove("is-open"),document.body.classList.remove("nav-open"),n.setAttribute("aria-hidden","true"),o.setAttribute("aria-hidden","true"))};t&&n&&o&&d&&(t.addEventListener("click",(()=>{n.classList.add("is-open"),o.classList.add("is-open"),document.body.classList.add("nav-open"),n.setAttribute("aria-hidden","false"),o.setAttribute("aria-hidden","false")})),d.addEventListener("click",l),o.addEventListener("click",l),document.addEventListener("keydown",(e=>{"Escape"===e.key&&l()})),n.querySelectorAll('a[href^="#"]').forEach((e=>{e.addEventListener("click",(t=>{const n=e.getAttribute("href"),o=n?document.querySelector(n):null;o&&(t.preventDefault(),l(),o.scrollIntoView({behavior:"smooth",block:"start"}))}))})));const r=document.querySelectorAll(".registerBtn"),a=document.getElementById("registrationModal"),c=document.getElementById("closeModalBtn"),i=document.querySelector(".homeModalOverlay"),s=document.getElementById("registrationForm"),m=document.getElementById("phone"),u=document.getElementById("phoneError"),y=document.getElementById("submitBtn"),v=window.phoneFormatter;let E=!1,h=0;const g=()=>{a&&(l(),E=!0,h=window.scrollY||0,a.style.display="block",document.body.style.overflow="hidden",u&&(u.style.display="none"))},L=()=>{a&&E&&(E=!1,a.style.display="none",document.body.style.overflow="",window.scrollTo(0,h))};r.forEach((e=>e.addEventListener("click",g))),c&&c.addEventListener("click",L),i&&i.addEventListener("click",L),s&&s.addEventListener("submit",(e=>{if(e.preventDefault(),!v)return console.error("phoneFormatter is not initialized. Check load order."),void(u&&(u.style.display="block"));const t=m?.value?.trim()||"";let n=!1;if(v.validate(t)?u&&(u.style.display="none"):(u&&(u.style.display="block"),n=!0),n)return;y&&(y.textContent="YUBORILMOQDA...",y.disabled=!0);const o=new Date,d=o.toLocaleDateString("uz-UZ"),l=o.toLocaleTimeString("uz-UZ"),r={TelefonRaqam:`${v.getCurrentCode()} ${t}`,SanaSoat:`${d} - ${l}`};localStorage.setItem("formData",JSON.stringify(r)),m&&(m.value=""),L(),window.location.href="/thankYou.html",y&&(y.textContent="DAVOM ETISH",y.disabled=!1)}));const p=document.getElementById("timer");if(p){let e=120;const t=()=>{const t=Math.floor(e/60),o=e%60;p.textContent=`${String(t).padStart(2,"0")}:${String(o).padStart(2,"0")}`,e<=0?clearInterval(n):e-=1};t();const n=setInterval(t,1e3)}}));